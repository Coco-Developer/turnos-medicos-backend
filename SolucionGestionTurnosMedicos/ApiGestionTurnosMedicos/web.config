<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>

		<security>
			<requestFiltering>
				<verbs allowUnlisted="true">
					<add verb="PUT" allowed="true" />
					<add verb="DELETE" allowed="true" />
				</verbs>
			</requestFiltering>
		</security>

		<rewrite>
			<rules>
				<rule name="React Routes" stopProcessing="true">
					<match url=".*" />
					<conditions logicalGrouping="MatchAll">
						<!-- No es un archivo físico -->
						<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
						<!-- No es un directorio físico -->
						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
						<!-- NO empezar con 'api' ni 'Auth' -->
						<add input="{REQUEST_URI}" pattern="^/(api|Auth|Turno|Paciente|Medico|Especialidad|Estado)(/.*)?$" negate="true" />
					</conditions>
					<action type="Rewrite" url="/index.html" />
				</rule>
			</rules>
		</rewrite>

		<aspNetCore processPath="dotnet" 
				  arguments=".\ApiGestionTurnosMedicos.dll" 
				  stdoutLogEnabled="true" 
				  stdoutLogFile=".\logs\stdout" 
				  hostingModel="inprocess" />

	</system.webServer>
  </location>
</configuration>
<!--ProjectGuid: D05E5515-C092-4C6A-B9B4-9ED233A0DBCE-->